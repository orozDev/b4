<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./style.css">
    <title>Slider</title>
</head>
<body>
<div class="container">
    <div class="swiper-container" id="swiper_1">
        <div class="swiper-list">
            <div class="item active"><img src="./img/1.jpg" alt=""></div>
            <div class="item"><img src="./img/2.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
            <div class="item"><img src="./img/4.jpg" alt=""></div>
            <div class="item"><img src="./img/5.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
        </div>
        <div class="swiper-control">
            <button class="btn left" data-swiper-id="swiper_1">
                <i class="fa-solid fa-angle-left"></i>
            </button>
            <button class="btn right" data-swiper-id="swiper_1">
                <i class="fa-solid fa-angle-right"></i>
            </button>
        </div>
    </div>
    <div class="swiper-container" id="swiper_2">
        <div class="swiper-list">
            <div class="item active"><img src="./img/1.jpg" alt=""></div>
            <div class="item"><img src="./img/2.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
            <div class="item"><img src="./img/4.jpg" alt=""></div>
            <div class="item"><img src="./img/5.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
        </div>
        <div class="swiper-control">
            <button class="btn left" data-swiper-id="swiper_2">
                <i class="fa-solid fa-angle-left"></i>
            </button>
            <button class="btn right" data-swiper-id="swiper_2">
                <i class="fa-solid fa-angle-right"></i>
            </button>
        </div>
    </div>
    <div class="swiper-container" id="swiper_3">
        <div class="swiper-list">
            <div class="item active"><img src="./img/1.jpg" alt=""></div>
            <div class="item"><img src="./img/2.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
            <div class="item"><img src="./img/4.jpg" alt=""></div>
            <div class="item"><img src="./img/5.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
        </div>
        <div class="swiper-control">
            <button class="btn left" data-swiper-id="swiper_3">
                <i class="fa-solid fa-angle-left"></i>
            </button>
            <button class="btn right" data-swiper-id="swiper_3">
                <i class="fa-solid fa-angle-right"></i>
            </button>
        </div>
    </div>
    <div class="swiper-container" id="swiper_4">
        <div class="swiper-list">
            <div class="item active"><img src="./img/1.jpg" alt=""></div>
            <div class="item"><img src="./img/2.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
            <div class="item"><img src="./img/4.jpg" alt=""></div>
            <div class="item"><img src="./img/5.jpg" alt=""></div>
            <div class="item"><img src="./img/3.jpg" alt=""></div>
        </div>
        <div class="swiper-control">
            <button class="btn left" data-swiper-id="swiper_4">
                <i class="fa-solid fa-angle-left"></i>
            </button>
            <button class="btn right" data-swiper-id="swiper_4">
                <i class="fa-solid fa-angle-right"></i>
            </button>
        </div>
    </div>
</div>

<script src="./swipe-event.js"></script>
<script>
    const btns = document.querySelectorAll('.swiper-container .btn')

    const handleSwiper = (swiperId, isNext) => {
        const swiperItems = document.querySelectorAll(`#${swiperId} > .swiper-list .item`)

        for (const swiperItem of swiperItems) {
            if (swiperItem.classList.contains('active')) {
                swiperItem.classList.remove('active')
                if (isNext) {
                    const nextSibling = swiperItem.nextElementSibling
                    if (nextSibling) {
                        nextSibling.classList.add('active')
                    } else {
                        swiperItems[0].classList.add('active')
                    }

                } else {
                    const previousSibling = swiperItem.previousElementSibling
                    if (previousSibling) {
                        previousSibling.classList.add('active')
                    } else {
                        swiperItems[swiperItems.length - 1].classList.add('active')
                    }
                }
                break
            }
        }
    }

    for (const btn of btns) {
        btn.addEventListener('click', e => {
            const swiperId = btn.dataset.swiperId
            const isNext = btn.classList.contains('right')
            handleSwiper(swiperId, isNext)
        })
    }

    const swiperContainers = document.querySelectorAll('.swiper-container')

    for (const swiperContainer of swiperContainers) {
        swiperContainer.addEventListener('swiped', e => {
            const direction = e.detail.dir
            const directions = ['right', 'left']
            if (directions.includes(direction)) {
                handleSwiper(swiperContainer.id, direction === 'right')
            }
        })
    }


</script>
</body>
</html>